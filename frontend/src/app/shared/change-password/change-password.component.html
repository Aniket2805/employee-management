<div class="change-password-bg">
    <div class="change-password-container">
        <div class="header-section">
            <h1 class="page-title">
                <i class="fa-solid fa-lock-open text-blue-500"></i>
                Change Password
            </h1>
            <p class="subtitle">Secure your account by updating your password</p>
        </div>

        <form [formGroup]="form" (ngSubmit)="submit()" class="change-password-form">
            <!-- Email Field -->
            <div class="form-group">
                <label for="email" class="form-label">
                    <i class="fa-solid fa-envelope text-blue-600"></i>
                    Email Address
                </label>
                <input id="email" type="email" formControlName="email" placeholder="Enter your email"
                    class="form-input" />
                <div class="error-message" *ngIf="form.get('email')?.invalid && form.get('email')?.touched">
                    <i class="fa-solid fa-circle-exclamation"></i>
                    Valid email is required
                </div>
            </div>

            <!-- Current Password Field -->
            <div class="form-group">
                <label for="currentPassword" class="form-label">
                    <i class="fa-solid fa-key text-blue-600"></i>
                    Current Password
                </label>
                <input id="currentPassword" type="password" formControlName="currentPassword"
                    placeholder="Enter your current password" class="form-input" />
                <div class="error-message"
                    *ngIf="form.get('currentPassword')?.invalid && form.get('currentPassword')?.touched">
                    <i class="fa-solid fa-circle-exclamation"></i>
                    Current password (min 6 chars) is required
                </div>
            </div>

            <!-- New Password Field -->
            <div class="form-group">
                <label for="newPassword" class="form-label">
                    <i class="fa-solid fa-lock text-blue-600"></i>
                    New Password
                </label>
                <input id="newPassword" type="password" formControlName="newPassword"
                    placeholder="Enter your new password" class="form-input" />
                <div class="error-message" *ngIf="form.get('newPassword')?.invalid && form.get('newPassword')?.touched">
                    <i class="fa-solid fa-circle-exclamation"></i>
                    New password (min 6 chars) is required
                </div>
            </div>

            <!-- Confirm Password Field -->
            <div class="form-group">
                <label for="confirmPassword" class="form-label">
                    <i class="fa-solid fa-shield text-blue-600"></i>
                    Re-enter Password
                </label>
                <input id="confirmPassword" type="password" formControlName="confirmPassword"
                    placeholder="Re-enter your new password" class="form-input"
                    [class.input-error]="form.get('confirmPassword')?.touched && form.get('confirmPassword')?.hasError('passwordMismatch')" />
                <div class="error-message"
                    *ngIf="form.get('confirmPassword')?.invalid && form.get('confirmPassword')?.touched">
                    <i class="fa-solid fa-circle-exclamation"></i>
                    <span *ngIf="form.get('confirmPassword')?.hasError('required')">
                        Password confirmation is required
                    </span>
                    <span *ngIf="form.get('confirmPassword')?.hasError('passwordMismatch')">
                        Passwords do not match
                    </span>
                    <span *ngIf="form.get('confirmPassword')?.hasError('minlength')">
                        Password must be at least 6 characters
                    </span>
                </div>
            </div>

            <!-- Submit Button -->
            <button type="submit" [disabled]="form.invalid || loading || form.hasError('passwordMismatch')"
                class="submit-btn">
                <span *ngIf="!loading">
                    <i class="fa-solid fa-check-circle"></i>
                    Change Password
                </span>
                <span *ngIf="loading">
                    <i class="fa-solid fa-spinner fa-spin"></i>
                    Updating Password...
                </span>
            </button>
        </form>

        <!-- Info Message -->
        <div class="info-message">
            <i class="fa-solid fa-info-circle"></i>
            <span>Your password must be at least 6 characters long for security</span>
        </div>
    </div>
</div>